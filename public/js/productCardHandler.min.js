function main() {
    const st = 'selected';
    const LA = 'link_active';
    let prCards = document.querySelectorAll("div.product-card");
    let selectedProducts = [];
    let menuItemArr = document.querySelectorAll("div.header_menu_item");
    let arrowUp = document.querySelector('div.goUp');

    //every single card
    Array.from(prCards).forEach((node) => {
        //console.log(node);
        let productName = node.querySelector("div.product_name").innerText;
        let node_weights = node.querySelectorAll("div.weights div.weights_item");
        let node_weights_arr = Array.from(node_weights);

        let btnAdd = node.querySelector("div.button-add");
        let btnAddText = btnAdd.querySelector('div.btn_add_text');
        let node_weights_price = btnAdd.querySelector("div.tp-price");

        node_weights_arr.forEach((elt) => {
            //click to a weight
            if (!isSelected(elt, st)) {
                elt.addEventListener("click", e => {
                    let price = elt.getAttribute("data-price");
                    if (price) {
                        node_weights_price.textContent = price;
                    } else {
                        node_weights_price.textContent = 'unkonwn';
                    }
                    delClassElt(node_weights, st);
                    elt.classList.add(st);

                    if (btnAddText.classList.contains(st)) {
                        btnAddText.classList.remove(st)
                        btnAddText.textContent = 'Выбрать';
                    }

                })
            }
        })

        //btnAdd handler
        btnAdd.addEventListener("click", e => {

            node_weights_arr.forEach(elt => {
                if (isSelected(elt, st)) {
                    btnAddText.classList.add(st);
                    btnAddText.textContent = 'В корзине';
                    selectedProducts.push({
                        "name": productName,
                        'weight': elt.innerText,
                        "price": elt.getAttribute('data-price'),
                    });
                }
            });
            console.log('\n');
            selectedProducts.forEach(function(e) {
                console.log(e['name'] + " " + e['weight'] + " " + e['price']);
            });

        });
    }); //end array of product cards
    //ArrowUp handler

    arrowUp.addEventListener('click', function(e) {
        delClassElt(menuItemArr, LA);
    })

    //selectedProduct

    //menu handler
    Array.from(menuItemArr).forEach(function(elt) {
        elt.addEventListener('click', function(ev) {
            delClassElt(menuItemArr, LA);
            elt.classList.add(LA);


        });
    });

}

function showCart(cart) {
    console.log(cart)
}
//delete classname from nodelist
function delClassElt(nodeList, classElt) {
    Array.from(nodeList).forEach(elt => {
        if (elt.classList.contains(classElt)) {
            elt.classList.remove(classElt);
        }
    })
}

function isSelected(elt, st) {
    return elt.classList.contains(st);
}

main();